(self.webpackChunkhelp_book=self.webpackChunkhelp_book||[]).push([[872],{8826:(e,s,n)=>{"use strict";n.r(s),n.d(s,{addsNewCar:()=>t});var i=n(8454),r=n(9631);const t=async e=>{try{const s=await(0,r.ET)((0,r.hJ)(i.db,"cars"),e);return alert("\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0456\u043b\u044c ".concat(e.name," \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e.")),s}catch(s){return alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u0456 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0456\u043b\u044f: ".concat(e.name),s),null}}},2559:(e,s,n)=>{const{addsNewCar:i}=n(8826);e.exports={addsNewCar:i}},8872:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>ee});var i=n(8536),r=n(2791),t=n(4270),l=n(9335),a=n(5739),d=n(6443),o=n(1709),c=n(9370),h=n(6790),x=n(4164),j=n(184);const p=e=>{let{isOpen:s,onClose:n,children:i}=e;return(0,x.createPortal)((0,j.jsxs)(l.u_,{isOpen:s,onClose:n,size:"lg",children:[(0,j.jsx)(a.Z,{}),(0,j.jsxs)(d.h,{children:[(0,j.jsx)(o.x,{children:"P\u0159idat auto"}),(0,j.jsx)(c.o,{}),(0,j.jsx)(h.f,{p:4,children:i})]})]}),document.getElementById("modal"))};var g=n(634),C=n(4315),u=n(7074),m=n(6600),y=n(1091),v=n(3045),b=n(9168),S=n(2784),w=n(8280),k=n(2506),f=n(8454),I=n(9631);var A=n(8007);const D=A.Ry({name:A.Z_().matches(/^(CD|CDV|OV|D|EXP)\d+$/,'N\xe1zev mus\xed obsahovat typ a \u010d\xedslo, nap\u0159\xedklad "CDV114"').required("N\xe1zev je povinn\xfd").test("unique","Toto auto ji\u017e existuje",(async e=>{if(!e)return!1;return await(async e=>{const s=(0,I.hJ)(f.db,"cars"),n=(0,I.IO)(s,(0,I.ar)("name","==",e));return(await(0,I.PL)(n)).empty})(e)})),type:A.Z_().required("Typ je povinn\xfd"),drivingStyle:A.Z_().required("Typ je povinn\xfd"),comment:A.Z_()}),F=e=>{let{onSubmit:s}=e;return(0,j.jsx)(k.J9,{initialValues:{name:"",type:"",hasAirConditioner:!1,hasFridge:!1,comment:"",drivingStyle:""},validationSchema:D,onSubmit:e=>{s(e)},children:e=>{let{values:s,handleChange:n,setFieldValue:i,errors:r,touched:t}=e;return(0,j.jsx)(g.x,{as:k.l0,p:4,borderWidth:1,borderRadius:"md",boxShadow:"md",children:(0,j.jsxs)(C.g,{spacing:4,align:"stretch",children:[(0,j.jsxs)(u.NI,{isInvalid:t.name&&r.name,isRequired:!0,children:[(0,j.jsx)(m.l,{children:"N\xe1zev (obsahuje typ a \u010d\xedslo)"}),(0,j.jsx)(k.gN,{as:y.I,name:"name",placeholder:"Nap\u0159\xedklad CDV114",onChange:e=>i("name",e.target.value.toUpperCase())}),t.name&&r.name?(0,j.jsx)(g.x,{color:"red.500",children:r.name}):null]}),(0,j.jsxs)(u.NI,{isInvalid:t.type&&r.type,isRequired:!0,children:[(0,j.jsx)(m.l,{children:"Typ"}),(0,j.jsxs)(k.gN,{as:v.P,name:"type",placeholder:"Vyberte typ",children:[(0,j.jsx)("option",{value:"CD",children:"CD"}),(0,j.jsx)("option",{value:"CDV",children:"CDV"}),(0,j.jsx)("option",{value:"OV",children:"OV"}),(0,j.jsx)("option",{value:"D",children:"D"}),(0,j.jsx)("option",{value:"EXP",children:"EXP"})]}),t.type&&r.type?(0,j.jsx)(g.x,{color:"red.500",children:r.type}):null]}),(0,j.jsxs)(u.NI,{display:"flex",alignItems:"center",children:[(0,j.jsx)(m.l,{mb:"0",children:"Klimatizace"}),(0,j.jsx)(k.gN,{as:b.r,name:"hasAirConditioner",colorScheme:"green",isChecked:s.hasAirConditioner,onChange:()=>i("hasAirConditioner",!s.hasAirConditioner)})]}),(0,j.jsxs)(u.NI,{display:"flex",alignItems:"center",children:[(0,j.jsx)(m.l,{mb:"0",children:"Vestavba (ledni\u010dce)"}),(0,j.jsx)(k.gN,{as:b.r,name:"hasFridge",colorScheme:"green",isChecked:s.hasFridge,onChange:()=>i("hasFridge",!s.hasFridge)})]}),(0,j.jsxs)(u.NI,{children:[(0,j.jsx)(m.l,{children:"Styl j\xedzdy"}),(0,j.jsxs)(k.gN,{as:v.P,name:"drivingStyle",placeholder:"Vyberte styl j\xedzdy",children:[(0,j.jsx)("option",{value:"A",children:"A"}),(0,j.jsx)("option",{value:"B",children:"B"}),(0,j.jsx)("option",{value:"C",children:"C"}),(0,j.jsx)("option",{value:"0",children:"0"})]})]}),(0,j.jsxs)(u.NI,{children:[(0,j.jsx)(m.l,{children:"Koment\xe1\u0159 k autu"}),(0,j.jsx)(k.gN,{as:S.g,name:"comment",placeholder:"P\u0159idejte koment\xe1\u0159..."})]}),(0,j.jsx)(w.z,{type:"submit",bg:"#6da305",color:"white",_hover:{bg:"#5c8e04"},children:"P\u0159idat auto"})]})})}})};var V=n(2559),z=n(6341),N=n(5379),O=n(4217),E=n(6355),P=n(1087);const T=e=>{let{filters:s}=e;const{search:n,typeCars:i,drivingStyle:t,hasAirConditioner:l,hasFridge:a}=s,[d,o]=(0,r.useState)([]),[c,h]=(0,r.useState)(!0);(0,r.useEffect)((()=>{const e=(0,I.hJ)(f.db,"cars"),s=(0,I.cf)(e,(e=>{const s=e.docs.map((e=>({id:e.id,...e.data()}))).filter((e=>{const s=e.name.includes(n),r=!i||e.type===i,d=!t||e.drivingStyle===t,o=!l||!0===e.hasAirConditioner,c=!a||!0===e.hasFridge;return s&&r&&o&&c&&d}));o(s),h(!1)}));return()=>s()}),[i,t,l,a,n]);const x=e=>{switch(e){case"A":return"#59c959";case"B":return"#ecd950";case"C":return"#ff5151";default:return"#e0e0e0"}};return(0,j.jsx)(z.r,{pt:4,w:"100%",templateColumns:{base:"repeat(1, 1fr)",md:"repeat(3, 1fr)"},gap:{base:3,md:6},children:d.map((e=>(0,j.jsx)(P.rU,{to:"/cars/".concat(e.id),children:(0,j.jsxs)(N.k,{w:"100%",alignItems:"center",justify:"space-between",gap:4,p:{base:1,md:3},borderWidth:1,borderRadius:"md",boxShadow:"md",bg:x(e.drivingStyle),children:[(0,j.jsx)(O.x,{fontWeight:"bold",fontSize:"lg",children:e.name}),(0,j.jsxs)(g.x,{display:"flex",gap:3,children:[(0,j.jsxs)(g.x,{display:"flex",alignItems:"center",mt:2,children:[(0,j.jsx)(E.l51,{color:e.hasAirConditioner?"green":"gray"}),(0,j.jsx)(b.r,{ml:2,colorScheme:"green",isChecked:e.hasAirConditioner,isReadOnly:!0})]}),(0,j.jsxs)(g.x,{display:"flex",alignItems:"center",mt:2,children:[(0,j.jsx)(E.FSC,{color:e.hasFridge?"green":"gray"}),(0,j.jsx)(b.r,{ml:2,colorScheme:"green",isChecked:e.hasFridge,isReadOnly:!0})]}),(0,j.jsxs)(g.x,{display:"flex",alignItems:"center",mt:2,children:[(0,j.jsx)(E.BYR,{size:"30px",color:"green"}),(0,j.jsx)(O.x,{ml:2,fontSize:26,children:e.drivingStyle})]})]})]})},e.id)))})};var q=n(6511),R=n(4295),B=n(5660),_=n(9271),X=n(7186),H=n(2571),J=n(6486),Z=n(7769),M=n(71),W=n(8906),K=n(9848),L=n(7874),U=n(3215),G=n(6092),Y=n(203);const $=e=>{let{typeCars:s,setTypeCars:n,drivingStyle:i,setDrivingStyle:t,hasAirConditioner:l,setHasAirConditioner:a,hasFridge:d,setHasFridge:o}=e;const{isOpen:c,onOpen:h,onClose:x}=(0,L.q)(),p=(0,r.useRef)(),u=[s,i,l,d].filter(Boolean).length;console.log("activeFilters",u),(0,r.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&x()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[x]);return(0,j.jsxs)(g.x,{display:{base:"block",md:"none"},ref:p,children:[(0,j.jsxs)(g.x,{position:"relative",children:[(0,j.jsx)(B.h,{icon:c?(0,j.jsx)(G.T,{}):(0,j.jsx)(E.ulB,{}),onClick:c?x:h,"aria-label":"Open Filter Menu",position:"relative"}),u>0&&(0,j.jsx)(g.x,{position:"absolute",top:"-5px",right:"-5px",fontSize:"10px",color:"white",bg:"red.500",borderRadius:"full",width:"15px",height:"15px",display:"flex",alignItems:"center",justifyContent:"center",children:u})]}),c&&(0,j.jsx)(g.x,{position:"absolute",top:"60px",left:"0",width:"100%",bg:"white",zIndex:"overlay",boxShadow:"md",p:4,children:(0,j.jsxs)(C.g,{align:"start",spacing:4,children:[(0,j.jsxs)(g.x,{w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",ml:"auto",position:"relative",children:[(0,j.jsx)(O.x,{children:"Filtry: "}),(0,j.jsx)(B.h,{size:"md",icon:(0,j.jsx)(Y.tGM,{}),onClick:()=>{n(""),t(""),a(null),o(null)},"aria-label":"Clear Filter",position:"relative"}),u>0&&(0,j.jsx)(g.x,{position:"absolute",top:"-5px",right:"-5px",fontSize:"10px",color:"white",bg:"red.500",borderRadius:"full",width:"15px",height:"15px",display:"flex",alignItems:"center",justifyContent:"center",children:u})]}),(0,j.jsxs)(_.v,{children:[(0,j.jsx)(X.j,{as:w.z,rightIcon:(0,j.jsx)(K.v,{}),w:"100%",children:s||"Typ auta:"}),(0,j.jsxs)(H.q,{w:"100%",children:[(0,j.jsx)(J.s,{w:"100%",onClick:()=>n(""),children:"V\u0161e"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>n("CDV"),children:"CDV"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>n("CD"),children:"CD"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>n("D"),children:"D"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>n("OV"),children:"OV"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>n("EXP"),children:"EXP"})]})]}),(0,j.jsxs)(_.v,{children:[(0,j.jsx)(X.j,{as:w.z,rightIcon:(0,j.jsx)(K.v,{}),w:"100%",children:i||"Styl j\xedzdy:"}),(0,j.jsxs)(H.q,{w:"100%",children:[(0,j.jsx)(J.s,{w:"100%",onClick:()=>t(""),children:"V\u0161e"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>t("A"),children:"A"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>t("B"),children:"B"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>t("C"),children:"C"}),(0,j.jsx)(J.s,{w:"100%",onClick:()=>t("0"),children:"0"})]})]}),(0,j.jsx)(U.X,{name:"hasAirConditioner",isChecked:l,onChange:()=>{a((e=>!e))},children:"Klimatizace"}),(0,j.jsx)(U.X,{name:"hasVestavba",isChecked:d,onChange:()=>o((e=>!e)),children:"Vestavba (ledni\u010dka)"})]})})]})},Q=e=>{let{search:s,setSearch:n,typeCars:i,setTypeCars:r,drivingStyle:t,setDrivingStyle:l,hasAirConditioner:a,setHasAirConditioner:d,hasFridge:o,setHasFridge:c,setIsOpenModalAddCar:h}=e;const x=e=>{r(e)};return(0,j.jsxs)(N.k,{gap:4,children:[(0,j.jsxs)(q.B,{children:[(0,j.jsx)(R.Z,{pointerEvents:"none",children:(0,j.jsx)(M.eaK,{color:"gray.300"})}),(0,j.jsx)(y.I,{w:{base:"100%",md:"400px"},value:s,onChange:e=>{n(e.target.value.toUpperCase())},placeholder:"Search"})]}),(0,j.jsxs)(g.x,{display:{base:"flex",md:"none"},gap:2,children:[(0,j.jsx)($,{typeCars:i,setTypeCars:r,drivingStyle:t,setDrivingStyle:l,hasAirConditioner:a,setHasAirConditioner:d,hasFridge:o,setHasFridge:c}),(0,j.jsx)(B.h,{bg:"#6da305",color:"white",_hover:{bg:"#5c8e04"},icon:(0,j.jsx)(W.d,{}),onClick:()=>h(!0),"aria-label":"Open Modal Add Cars",position:"relative"})]}),(0,j.jsx)(g.x,{display:{base:"none",md:"block"},children:(0,j.jsxs)(N.k,{gap:4,align:"center",children:[(0,j.jsxs)(_.v,{children:[(0,j.jsx)(X.j,{as:w.z,rightIcon:(0,j.jsx)(K.v,{}),w:"80px",children:i||"Type"}),(0,j.jsxs)(H.q,{minW:"80px",children:[(0,j.jsx)(J.s,{onClick:()=>x(""),children:"Type"}),(0,j.jsx)(J.s,{onClick:()=>x("CDV"),children:"CDV"}),(0,j.jsx)(J.s,{onClick:()=>x("CD"),children:"CD"}),(0,j.jsx)(J.s,{onClick:()=>x("D"),children:"D"}),(0,j.jsx)(J.s,{onClick:()=>x("OV"),children:"OV"}),(0,j.jsx)(J.s,{onClick:()=>x("EXP"),children:"EXP"})]})]}),(0,j.jsxs)(N.k,{align:"center",children:[(0,j.jsx)(Z.J,{as:E.l51,boxSize:5,mr:2,color:a?"green.500":"gray.500"}),(0,j.jsx)(b.r,{colorScheme:"green",isChecked:a,onChange:()=>d(!a)})]}),(0,j.jsxs)(N.k,{align:"center",children:[(0,j.jsx)(Z.J,{as:E.FSC,boxSize:5,mr:2}),(0,j.jsx)(b.r,{colorScheme:"green",isChecked:o,onChange:()=>c(!o)})]}),(0,j.jsx)(w.z,{leftIcon:(0,j.jsx)(W.d,{}),bg:"#6da305",color:"white",_hover:{bg:"#5c8e04"},onClick:()=>h(!0),children:"p\u0159idat auto"})]})})]})},ee=()=>{const[e,s]=(0,r.useState)(!1),[n,l]=(0,r.useState)(""),[a,d]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),[g,C]=(0,r.useState)("");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(t.q,{children:(0,j.jsx)("title",{children:"Cars"})}),(0,j.jsxs)(i.W,{w:"100%",children:[(0,j.jsx)(Q,{search:n,setSearch:l,typeCars:a,setTypeCars:d,drivingStyle:g,setDrivingStyle:C,hasAirConditioner:o,setHasAirConditioner:c,hasFridge:h,setHasFridge:x,setIsOpenModalAddCar:s}),(0,j.jsx)(T,{filters:{search:n,typeCars:a,drivingStyle:g,hasAirConditioner:o,hasFridge:h}})]}),e&&(0,j.jsx)(p,{isOpen:e,onClose:()=>s(!1),children:(0,j.jsx)(F,{onSubmit:async e=>{await(0,V.addsNewCar)(e),s(!1)}})})]})}}}]);
//# sourceMappingURL=872.42881ce0.chunk.js.map