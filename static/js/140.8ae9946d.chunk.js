"use strict";(self.webpackChunkhelp_book=self.webpackChunkhelp_book||[]).push([[140],{4140:(e,s,n)=>{n.r(s),n.d(s,{default:()=>ne});var t=n(8536),i=n(2791),r=n(4270),a=n(3934),o=n(4705),l=n(2559),d=n(8454),c=n(9631),h=n(6341),x=n(5379),g=n(4217),p=n(634),u=n(6355),j=n(1087);const C=e=>{switch(e){case"A":return"#59c959";case"B":return"#ecd950";case"C":return"#ff5151";case"A/B":return"linear-gradient(-8deg, #ecd950 45%, #59c959 55%)";default:return"#e0e0e0"}};var m=n(8014);const f=(e,s)=>{const n=/^([a-zA-Z]+)(\d+)$/,[,t,i]=e.name.match(n)||[],[,r,a]=s.name.match(n)||[],o=t.localeCompare(r);return 0!==o?o:parseInt(i,10)-parseInt(a,10)};var y=n(6856),b=n(184);const S=e=>{let{filters:s,isGridView:n}=e;const{search:t,typeCars:r,drivingStyle:a,hasAirConditioner:o,hasFridge:l,hasHeating:S,hasSoundProofed:w}=s,[v,k]=(0,i.useState)([]),[I,H]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{const e=(0,c.hJ)(d.db,"cars"),s=(0,c.cf)(e,(e=>{const s=e.docs.map((e=>({id:e.id,...e.data()}))).filter((e=>{const s=e.name.includes(t),n=!r||e.type===r,i=!a||e.drivingStyle===a,d=!o||!0===e.hasAirConditioner,c=!l||!0===e.hasFridge,h=!S||!0===e.hasHeating,x=!w||!0===e.hasSoundProofed;return s&&n&&d&&c&&i&&h&&x}));k(s),H(!1)}));return()=>s()}),[r,a,o,l,t,S,w]),n?(0,b.jsx)(h.r,{pt:4,w:"100%",templateColumns:{base:"repeat(4, 1fr)",md:"repeat(6, 1fr)",xl:"repeat(10, 1fr)"},gap:{base:1,md:6,xl:2},children:v.sort(((e,s)=>f(e,s))).map((e=>(0,b.jsx)(j.rU,{to:"/cars/".concat(e.id),children:(0,b.jsxs)(x.k,{w:"100%",flexDirection:"column",alignItems:"center",justify:"space-between",gap:1,p:{base:0,md:3},borderWidth:1,borderRadius:"md",boxShadow:"md",bg:C(e.drivingStyle),children:[(0,b.jsx)(g.x,{fontWeight:"bold",fontSize:14,children:e.name}),(0,b.jsxs)(p.x,{display:"flex",gap:1,children:[(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(u.l51,{color:e.hasAirConditioner?"green":"red"})}),"hasHeating"in e&&(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(m.$b7,{color:e.hasHeating?"green":"red"})}),(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(u.FSC,{color:e.hasFridge?"green":"red"})}),"hasSoundProofed"in e&&(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(y.HvK,{color:e.hasSoundProofed?"green":"red"})})]})]})},e.id)))}):(0,b.jsx)(h.r,{pt:4,w:"100%",templateColumns:{base:"repeat(1, 1fr)",md:"repeat(3, 1fr)"},gap:{base:3,md:6},children:v.sort(((e,s)=>f(e,s))).map((e=>(0,b.jsx)(j.rU,{to:"/cars/".concat(e.id),children:(0,b.jsxs)(x.k,{w:"100%",alignItems:"center",justify:"space-between",gap:4,p:{base:1,md:3},borderWidth:1,borderRadius:"md",boxShadow:"md",bg:C(e.drivingStyle),children:[(0,b.jsx)(g.x,{fontWeight:"bold",fontSize:"lg",children:e.name}),(0,b.jsxs)(p.x,{display:"flex",gap:1,children:[(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(u.l51,{color:e.hasAirConditioner?"green":"red"})}),"hasHeating"in e&&(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(m.$b7,{color:e.hasHeating?"green":"red"})}),(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(u.FSC,{color:e.hasFridge?"green":"red"})}),"hasSoundProofed"in e&&(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(y.HvK,{color:e.hasSoundProofed?"green":"red"})}),(0,b.jsx)(p.x,{display:"flex",alignItems:"center",px:1,children:(0,b.jsx)(g.x,{fontSize:22,children:e.drivingStyle})})]})]})},e.id)))})};var w=n(5660),v=n(6511),k=n(4295),I=n(1091),H=n(9271),A=n(7186),P=n(5908),O=n(2571),z=n(6486),E=n(7769),F=n(9168),T=n(71),V=n(8906),D=n(9848),R=n(7874),B=n(4315),M=n(3215),W=n(6092),X=n(203);const G=(0,n(8842).E)(p.x),L=e=>{let{typeCars:s,setTypeCars:n,drivingStyle:t,setDrivingStyle:r,hasAirConditioner:a,setHasAirConditioner:o,hasFridge:l,setHasFridge:d,hasHeating:c,setHasHeating:h,hasSoundProofed:x,setHasSoundProofed:j}=e;const{isOpen:C,onOpen:m,onClose:f}=(0,R.q)(),[y,S]=(0,i.useState)(0),v=(0,i.useRef)(),k=[s,t,a,l,c,x].filter(Boolean).length;(0,i.useEffect)((()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&f()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[f]),(0,i.useEffect)((()=>(C?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")})),[C]);return(0,b.jsxs)(p.x,{display:{base:"block",xl:"none"},ref:v,children:[(0,b.jsxs)(p.x,{position:"relative",children:[(0,b.jsx)(w.h,{icon:C?(0,b.jsx)(W.T,{}):(0,b.jsx)(u.ulB,{}),onClick:C?f:m,"aria-label":"Open Filter Menu",position:"relative"}),k>0&&(0,b.jsx)(p.x,{position:"absolute",top:"-5px",right:"-5px",fontSize:"10px",color:"white",bg:"red.500",borderRadius:"full",width:"15px",height:"15px",display:"flex",alignItems:"center",justifyContent:"center",children:k})]}),(0,b.jsxs)(G,{initial:{height:0,opacity:0},animate:C?{height:"auto",opacity:1}:{height:0,opacity:0},overflow:"hidden",position:"absolute",top:"60px",left:"0",width:"100%",bg:"white",zIndex:"overlay",boxShadow:"md",p:C?4:0,onTouchStart:e=>{console.log(e.touches[0].clientY),S(e.touches[0].clientY)},onTouchEnd:e=>{const s=e.changedTouches[0].clientY;y-s>50&&f()},transition:{height:{duration:.4},opacity:{duration:.8}},children:[(0,b.jsxs)(B.g,{align:"start",spacing:4,children:[(0,b.jsxs)(p.x,{w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",ml:"auto",position:"relative",children:[(0,b.jsx)(g.x,{children:"Filtry: "}),(0,b.jsx)(w.h,{size:"md",icon:(0,b.jsx)(X.tGM,{}),onClick:()=>{n(""),r(""),o(null),d(null),h(null),j(null),f()},"aria-label":"Clear Filter",position:"relative"}),k>0&&(0,b.jsx)(p.x,{position:"absolute",top:"-5px",right:"-5px",fontSize:"10px",color:"white",bg:"red.500",borderRadius:"full",width:"15px",height:"15px",display:"flex",alignItems:"center",justifyContent:"center",children:k})]}),(0,b.jsxs)(H.v,{children:[(0,b.jsx)(A.j,{as:P.z,rightIcon:(0,b.jsx)(D.v,{}),w:"100%",children:s||"Typ auta:"}),(0,b.jsxs)(O.q,{w:"100%",children:[(0,b.jsx)(z.s,{w:"100%",onClick:()=>n(""),children:"V\u0161e"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>n("CDV"),children:"CDV"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>n("CD"),children:"CD"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>n("D"),children:"D"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>n("OV"),children:"OV"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>n("EXP"),children:"EXP"})]})]}),(0,b.jsxs)(H.v,{children:[(0,b.jsx)(A.j,{as:P.z,rightIcon:(0,b.jsx)(D.v,{}),w:"100%",children:t||"Styl j\xedzdy:"}),(0,b.jsxs)(O.q,{w:"100%",children:[(0,b.jsx)(z.s,{w:"100%",onClick:()=>r(""),children:"V\u0161e"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>r("A"),children:"A"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>r("B"),children:"B"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>r("C"),children:"C"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>r("A/B"),children:"A/B"}),(0,b.jsx)(z.s,{w:"100%",onClick:()=>r("0"),children:"0"})]})]}),(0,b.jsx)(M.X,{name:"hasAirConditioner",isChecked:a,onChange:()=>{o((e=>!e))},children:"Klimatizace"}),(0,b.jsx)(M.X,{name:"hasHeating",isChecked:c,onChange:()=>{h((e=>!e))},children:"Topen\xed:"}),(0,b.jsx)(M.X,{name:"hasFridge",isChecked:l,onChange:()=>d((e=>!e)),children:"Vestavba (ledni\u010dka)"}),(0,b.jsx)(M.X,{name:"hasSoundProofed",isChecked:x,onChange:()=>j((e=>!e)),children:"Odhlu\u010dn\u011bn\xe9"})]}),(0,b.jsx)(P.z,{bgColor:"#6da305",color:"white",mt:4,w:"100%",onClick:f,children:"Pou\u017e\xedt filtry"})]})]})};var q=n(8052);const J=e=>{let{search:s,setSearch:n,typeCars:t,setTypeCars:i,drivingStyle:r,setDrivingStyle:a,hasAirConditioner:o,setHasAirConditioner:l,hasFridge:d,setHasFridge:c,setIsOpenModalAddCar:h,isGridView:g,setIsGridView:j,hasHeating:C,setHasHeating:f,hasSoundProofed:S,setHasSoundProofed:R,setIsOpenModalScan:B}=e;const M=e=>{i(e)};return(0,b.jsxs)(x.k,{gap:2,children:[(0,b.jsx)(w.h,{color:"#6da305",icon:(0,b.jsx)(T.Y0M,{}),onClick:()=>B(!0),"aria-label":"Open Modal Add Cars",position:"relative"}),(0,b.jsxs)(v.B,{children:[(0,b.jsx)(k.Z,{pointerEvents:"none",children:(0,b.jsx)(T.eaK,{color:"gray.300"})}),(0,b.jsx)(I.I,{w:{base:"100%",md:"300px",xl:"500px"},value:s,onChange:e=>{n(e.target.value.toUpperCase())},placeholder:"Search"})]}),(0,b.jsx)(q.Z,{isGridView:g,setIsGridView:j}),(0,b.jsxs)(p.x,{display:{base:"flex",xl:"none"},gap:2,children:[(0,b.jsx)(L,{typeCars:t,setTypeCars:i,drivingStyle:r,setDrivingStyle:a,hasAirConditioner:o,setHasAirConditioner:l,hasFridge:d,setHasFridge:c,hasHeating:C,setHasHeating:f,hasSoundProofed:S,setHasSoundProofed:R}),(0,b.jsx)(w.h,{bg:"#6da305",color:"white",_hover:{bg:"#5c8e04"},icon:(0,b.jsx)(V.d,{}),onClick:()=>h(!0),"aria-label":"Open Modal Add Cars",position:"relative"})]}),(0,b.jsx)(p.x,{display:{base:"none",xl:"block"},children:(0,b.jsxs)(x.k,{gap:4,align:"center",children:[(0,b.jsxs)(H.v,{children:[(0,b.jsx)(A.j,{as:P.z,rightIcon:(0,b.jsx)(D.v,{}),w:"80px",children:t||"Type"}),(0,b.jsxs)(O.q,{minW:"80px",children:[(0,b.jsx)(z.s,{onClick:()=>M(""),children:"Type"}),(0,b.jsx)(z.s,{onClick:()=>M("CDV"),children:"CDV"}),(0,b.jsx)(z.s,{onClick:()=>M("CD"),children:"CD"}),(0,b.jsx)(z.s,{onClick:()=>M("D"),children:"D"}),(0,b.jsx)(z.s,{onClick:()=>M("OV"),children:"OV"}),(0,b.jsx)(z.s,{onClick:()=>M("EXP"),children:"EXP"})]})]}),(0,b.jsxs)(x.k,{align:"center",children:[(0,b.jsx)(E.J,{as:u.l51,boxSize:5,mr:2,color:o?"green.500":"gray.500"}),(0,b.jsx)(F.r,{colorScheme:"green",isChecked:o,onChange:()=>l(!o)})]}),(0,b.jsxs)(x.k,{align:"center",children:[(0,b.jsx)(E.J,{as:m.$b7,boxSize:5,mr:2,color:C?"green.500":"gray.500"}),(0,b.jsx)(F.r,{colorScheme:"green",isChecked:C,onChange:()=>f(!C)})]}),(0,b.jsxs)(x.k,{align:"center",children:[(0,b.jsx)(E.J,{as:u.FSC,boxSize:5,mr:2,color:d?"green.500":"gray.500"}),(0,b.jsx)(F.r,{colorScheme:"green",isChecked:d,onChange:()=>c(!d)})]}),(0,b.jsxs)(x.k,{align:"center",children:[(0,b.jsx)(E.J,{as:y.HvK,boxSize:5,mr:2,color:S?"green.500":"gray.500"}),(0,b.jsx)(F.r,{colorScheme:"green",isChecked:S,onChange:()=>R(!S)})]}),(0,b.jsx)(P.z,{leftIcon:(0,b.jsx)(V.d,{}),bg:"#6da305",color:"white",_hover:{bg:"#5c8e04"},onClick:()=>h(!0),children:"p\u0159idat auto"})]})})]})};var K=n(9335),U=n(5739),Z=n(6443),_=n(1709),$=n(9370),N=n(6790),Y=n(4164);const Q=e=>{let{imageSrc:s,annotations:n,renderComponent:t}=e;const[r,a]=(0,i.useState)([]),o=(0,i.useRef)(null);console.log("carList",r),(0,i.useEffect)((()=>{const e=o.current;e&&(e.style.position="relative",e.style.display="inline-block")}),[]),(0,i.useEffect)((()=>{n&&n.length>0&&(async()=>{try{console.log("annotations",n);const e=await Promise.all(n.map((async e=>{const s=e.description.replace(/\s+/g,""),n=await(0,l.getCarByName)(s);return n?{data:n,annotation:e}:null})));a(e.filter((e=>null!==e)))}catch(e){console.error("Error fetching car data:",e)}})()}),[n]);return(0,b.jsxs)(p.x,{ref:o,children:[(0,b.jsx)("img",{src:s,alt:"Annotated",style:{maxWidth:"100%",maxHeight:"100%",display:"block"}}),r.map(((e,s)=>{const n=e.annotation.boundingPoly.vertices,t=n[0].x,i=n[0].y,r=n[1].x-n[0].x,a=n[2].y-n[0].y,o=(e=>{const s=e[1].x-e[0].x,n=e[1].y-e[0].y;return 180*Math.atan2(n,s)/Math.PI})(n);return(0,b.jsx)(p.x,{position:"absolute",left:"".concat(t,"px"),top:"".concat(i,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),transform:"rotate(".concat(o,"deg)"),background:"rgba(255, 255, 255, 0.8)",border:"2px solid ".concat(C(e.data.drivingStyle)),padding:"8px",borderRadius:"8px",zIndex:10,bg:"transparent",children:(0,b.jsxs)(x.k,{w:"fit-content",alignItems:"center",justify:"space-between",gap:1,position:"absolute",top:"-29px",right:"0",bg:"#9b9b9b",p:"3px",borderTopRadius:"3px",children:[(0,b.jsxs)(g.x,{fontWeight:"bold",fontSize:14,color:C(e.data.drivingStyle),children:[e.data.name," (",e.data.drivingStyle,")"]}),(0,b.jsxs)(p.x,{display:"flex",gap:1,children:[(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(u.l51,{color:e.data.hasAirConditioner?"green":"red"})}),"hasHeating"in e.data&&(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(m.$b7,{color:e.data.hasHeating?"green":"red"})}),(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(u.FSC,{color:e.data.hasFridge?"green":"red"})}),"hasSoundProofed"in e.data&&(0,b.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,b.jsx)(y.HvK,{color:e.data.hasSoundProofed?"green":"red"})})]})]})},s)}))]})},ee=e=>{let{onRecognized:s}=e;const[n,t]=(0,i.useState)(!1),r=(0,i.useRef)(null),a=(0,i.useRef)(null),[o,l]=(0,i.useState)(null),[d,c]=(0,i.useState)(null),h=(0,i.useCallback)((()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((e=>{a.current&&(a.current.srcObject=e,a.current.play())})).catch((e=>{console.error("Error accessing camera:",e),alert("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e \u043a\u0430\u043c\u0435\u0440\u0438.")}))}),[]);(0,i.useEffect)((()=>(h(),()=>{a.current&&a.current.srcObject&&a.current.srcObject.getTracks().forEach((e=>e.stop()))})),[h]);return(0,b.jsxs)(x.k,{justify:"center",height:"calc(100vh - 140px)",position:"relative",children:[o?(0,b.jsx)(Q,{imageSrc:o,annotations:d}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(x.k,{position:"relative",justify:"center",w:"100%",height:"100%",children:[(0,b.jsx)("video",{ref:a,style:{maxWidth:"100%",maxHeight:"100%",border:"1px solid #ccc",borderRadius:"8px"}}),(0,b.jsx)("canvas",{ref:r,style:{display:"none"}})]})}),(0,b.jsx)("button",{style:{position:"absolute",bottom:"10px",width:"50px",height:"50px",borderRadius:"30px",backgroundColor:"gray"},onClick:async()=>{t(!0);const e=r.current,n=a.current;if(e&&n){const r=e.getContext("2d");e.width=n.videoWidth,e.height=n.videoHeight,r.drawImage(n,0,0,e.width,e.height);const a=e.toDataURL("image/png");l(a);try{var i;const e=await fetch("https://vision.googleapis.com/v1/images:annotate?key=".concat("AIzaSyAwEsPlXORwj3zcWO0nI0aC5SpnmgBuhVU"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:a.split(",")[1]},features:[{type:"TEXT_DETECTION"}]}]})}),n=await e.json();console.log("result",n);const r=(null===(i=n.responses[0].textAnnotations[0])||void 0===i?void 0:i.description)||"\u0422\u0435\u043a\u0441\u0442 \u043d\u0435 \u0440\u043e\u0437\u043f\u0456\u0437\u043d\u0430\u043d\u043e";c(n.responses[0].textAnnotations),t(!1),console.log("detectedText",r),s(r.replace(/\s+/g,""))}catch(o){console.error("Error with Vision API:",o),t(!1),alert("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0440\u043e\u0437\u043f\u0456\u0437\u043d\u0430\u0432\u0430\u043d\u043d\u0456 \u0442\u0435\u043a\u0441\u0442\u0443.")}}}})]})},se=e=>{let{isOpen:s,onClose:n}=e;const[t,r]=(0,i.useState)([]);return(0,Y.createPortal)((0,b.jsxs)(K.u_,{motionPreset:"slideInBottom",isOpen:s,onClose:n,size:"full",isCentered:!0,children:[(0,b.jsx)(U.Z,{}),(0,b.jsxs)(Z.h,{mt:20,borderTopRadius:20,children:[(0,b.jsxs)(_.x,{children:["Real-Time OCR Scanner Text: ",t]}),(0,b.jsx)($.o,{}),(0,b.jsx)(N.f,{p:4,h:"100%",children:(0,b.jsx)(ee,{onRecognized:e=>{r((s=>[...s,e]))}})})]})]}),document.getElementById("modalScan"))},ne=()=>{const[e,s]=(0,i.useState)(!1),[n,d]=(0,i.useState)(!1),[c,h]=(0,i.useState)(""),[x,g]=(0,i.useState)(""),[p,u]=(0,i.useState)(!1),[j,C]=(0,i.useState)(!1),[m,f]=(0,i.useState)(""),[y,w]=(0,i.useState)(!1),[v,k]=(0,i.useState)(!1),[I,H]=(0,i.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.q,{children:(0,b.jsx)("title",{children:"Cars"})}),(0,b.jsxs)(t.W,{w:"100%",maxW:{base:"100%",md:"95vw",xl:"80vw"},p:2,children:[(0,b.jsx)(J,{search:c,setSearch:h,typeCars:x,setTypeCars:g,drivingStyle:m,setDrivingStyle:f,hasAirConditioner:p,setHasAirConditioner:u,hasFridge:j,setHasFridge:C,setIsOpenModalAddCar:s,isGridView:y,setIsGridView:w,hasHeating:v,setHasHeating:k,hasSoundProofed:I,setHasSoundProofed:H,setIsOpenModalScan:d}),(0,b.jsx)(S,{filters:{search:c,typeCars:x,drivingStyle:m,hasAirConditioner:p,hasHeating:v,hasFridge:j,hasSoundProofed:I},isGridView:y})]}),e&&(0,b.jsx)(a.Z,{isOpen:e,onClose:()=>s(!1),children:(0,b.jsx)(o.Z,{onSubmit:async e=>{await(0,l.addsNewCar)(e),s(!1)}})}),n&&(0,b.jsx)(se,{isOpen:n,onClose:()=>d(!1)})]})}}}]);
//# sourceMappingURL=140.8ae9946d.chunk.js.map